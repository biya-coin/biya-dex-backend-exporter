global:
  scrape_interval: 15s
  evaluation_interval: 30s

# 告警规则配置
rule_files:
  - /etc/prometheus/alert_rules.yml

# Alertmanager 配置
alerting:
  alertmanagers:
    - static_configs:
        - targets:
            # 如果使用 Docker Compose，使用服务名
            - 'alertmanager:9093'
            # 如果本地运行，使用 localhost
            # - 'localhost:9093'
      timeout: 10s

# 说明：
# - 当前配置包含告警规则和 Alertmanager 连接配置
# - 本地 Exporter 端口由你提供为 18080
# - Alertmanager 默认端口为 9093
scrape_configs:
  - job_name: prometheus
    static_configs:
      - targets: ["localhost:9090"]

  - job_name: biya-exporter
    metrics_path: /metrics
    static_configs:
      # Prometheus 在 compose 容器内运行时，使用服务名访问 exporter
      - targets: ["exporter:18080"]

  - job_name: chain-node
    metrics_path: /metrics
    static_configs:
      # 访问主机上的 26660 端口
      # 通过 extra_hosts 配置的 host.docker.internal 访问主机端口
      - targets: ["172.24.0.1:26660"]
